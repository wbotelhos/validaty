!function(c){"use strict";var f={},u={init:function(a){return this.each(function(){u.destroy.call(this),this.opt=c.extend({},c.fn.validaty.defaults,a);var t=c(this).addClass("validaty");u._bind.call(this),t.data({settings:this.opt,validaty:!0})})},destroy:function(){return c(this).each(function(){c(this).off(".validaty").removeClass("validaty")})},helper:function(t){return f},valid:function(){return c(this).data("valid")},validate:function(t){return this.each(function(){u._process.call(this,[].concat.apply([],t))})},validator:function(t){return c.fn.validaty.defaults.validators[t]||c.error('Validator "'+t+'" not registered!')},_bind:function(){this.inputs=u._fields.call(this),c(this).on("submit.validaty",function(t){u._process.call(this,this.inputs,t)}.bind(this));for(var i=this,t=0;t<this.inputs.length;t++){var a,e=this.inputs[t],s=f.getParams(e).actions;for(a in e.hash="validaty-"+this.opt.hash(),e=c(e),s){var n=s[a].args.join(".validaty ")+".validaty";e.on(n,function(t,a){a||u._process.call(i,[this],t)})}}},_clear:function(t){c("#"+t.hash).remove(),c(t).removeClass("invalid valid")},_display:function(t){for(var a=u._message.call(this,t),i=a.children("ul"),e=0;e<t.fail.length;e++)c("<li />",{text:t.fail[e].message}).appendTo(i);a.animate({opacity:1},function(){this.opt.onMessage&&this.opt.onMessage()}.bind(this))},_distinct:function(t){for(var a=[],i=[],e=c(c(t).get().reverse()),s=0;s<e.length;s++)f.isCheckable(e[s])?-1===c.inArray(e[s].name,a)&&(a.push(e[s].name),i.push(e[s])):i.push(e[s]);return i},_error:function(t,a,i){var e=a.message;return"object"==typeof a.message&&(t.is("input")?e=a.message[t.attr("type")]:t.is("select")?e=a.message.select:t.is("textarea")&&(e=a.message.textarea)),u._format.call(this,e,i)},_fields:function(){var t=c(this);return(t.is("form")?c(this).find(":input"):t).not(this.opt.ignore)},_format:function(t,a){var i=(t=t||"Message type missing!").match(/{[^}]*}/g);if(i)for(var e=0;e<i.length&&e!=a.length;e++)t=t.replace(i[e],a[e]);return t},_highlight:function(t){var a=t.el;(a=f.isCheckable(t.el[0])?c(this).find('[name="'+t.el.attr("name")+'"]'):a).addClass(t.fail.length?"invalid":"valid")},_message:function(t){var a=c("<div />",{id:t.el[0].hash,html:"<ul></ul>",class:"validaty-message"});return this.opt.errorTarget?this.opt.errorTarget.call(this,t.el,a):a.insertAfter(t.el[0]),a},_process:function(t,a){t=t&&t.length&&t||this.inputs;for(var i=u._distinct.call(this,t),e=a&&"submit"===a.type,s=0;s<t.length;s++)u._clear.call(this,t[s]);for(s=0;s<i.length;s++){var n=u._validate.call(this,i[s]);0<n.fail.length&&(e&&a.preventDefault(),u._display.call(this,n)),u._highlight.call(this,n)}this.opt.focus&&e&&c(this).find(".invalid:visible:"+this.opt.focus).trigger("focus",!0);var r=!c(t).filter(".invalid").length;c(this).data("valid",r),r?this.opt.onValid&&this.opt.onValid.call(this,t,a):this.opt.onInvalid&&this.opt.onInvalid.call(this,t,a)},_validate:function(t){var a=this,i=f.getParams(t).validations,e=[],s=(t=c(t)).attr("data-validaty-ignore"),n={el:t,pass:[],fail:[]};"string"==typeof s&&(e=s.split(" "));for(var r=0;r<i.length;r++){var l=i[r].name,o=a.opt.validators[l],h=(o||c.error('Validator "'+l+'" not registered!'),i[r].args),d=u._error.call(a,t,o,h);n[!!e.includes(l)||o.validate.apply(t,[f,a].concat(h))?"pass":"fail"].push({type:l,message:d})}return n}};f.getParams=function(t){var t=c(t).attr("data-validaty"),a={validations:[],actions:[]};if(t)for(var i=t.split(/\s+/),e=0;e<i.length;e++){var s=(r=c(i[e].split(":")).get().reverse()).pop(),n=/^on/.test(s),r=c(r).get().reverse();if(!n)for(var l=0;l<r.length;l++)isNaN(r[l])?r[l]=r[l].replace("%20"," "):"equal"!==s&&(r[l]=parseInt(r[l]));a[n?"actions":"validations"].push({name:s,args:r})}return a},f.isCheckable=function(t){return/checkbox|radio/i.test(t.type)},c.fn.validaty=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void c.error("Method "+t+" does not exist!"):u.init.apply(this,arguments)},c.fn.validaty.defaults={errorTarget:void 0,focus:"first",hash:function(){return Math.random().toString().substring(2)},ignore:":submit, :reset, :image, :disabled",onInvalid:void 0,onValid:void 0,validators:{}},c.validaty={register:function(){return c.fn.validaty.defaults.validators[arguments[0]]={message:arguments[1],validate:arguments[2]},this}}}(jQuery);